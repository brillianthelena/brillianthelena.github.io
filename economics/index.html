
<!DOCTYPE html>
<html lang="zh-Hant" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>經濟學期中考重點整理</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- KaTeX for Math Formulas -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" xintegrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" xintegrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" xintegrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax5AScKprqYWALKsoi5SR/C6TgfOCDdniRNN" crossorigin="anonymous"></script>
    <!-- Chart.js for Graphs -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', 'Noto Sans TC', sans-serif;
            background-color: #F9FAFB;
            color: #1F2937;
        }
        .figma-card {
            background-color: white;
            border-radius: 16px;
            border: 1px solid #E5E7EB;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.05), 0 2px 4px -2px rgb(0 0 0 / 0.05);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .figma-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.08), 0 4px 6px -4px rgb(0 0 0 / 0.08);
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .accordion-item.active .accordion-arrow {
             transform: rotate(180deg);
        }
        /* Animation for elements fading in */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in {
            animation: fadeIn 0.7s ease-out forwards;
        }
        .pro-tip {
            background-color: #FEFCE8; /* bg-yellow-50 */
            border-left: 4px solid #FACC15; /* border-yellow-400 */
            color: #854D0E; /* text-yellow-800 */
        }
    </style>
</head>
<body class="antialiased">

    <!-- Header -->
    <header class="bg-white/80 backdrop-blur-lg sticky top-0 z-40 border-b border-gray-200">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-3">
                 <svg class="h-8 w-8 text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25" />
                </svg>
                <h1 class="text-xl font-bold text-gray-800">經濟學重點溫習</h1>
            </div>
            <nav class="hidden md:flex space-x-8 text-sm font-medium">
                <a href="#definitions" class="text-gray-500 hover:text-blue-600 transition">名詞定義</a>
                <a href="#formulas" class="text-gray-500 hover:text-blue-600 transition">計算公式</a>
                <a href="#direction" class="text-gray-500 hover:text-blue-600 transition">考試方向</a>
                <a href="#topics" class="text-gray-500 hover:text-blue-600 transition">常見主題</a>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-6 py-12">

        <!-- Hero Section -->
        <section class="text-center mb-24 fade-in">
            <h2 class="text-4xl md:text-5xl font-extrabold text-gray-900 mb-4 tracking-tight">經濟學期中考終極指南</h2>
            <p class="text-lg text-gray-600 max-w-3xl mx-auto">整合甲、乙兩班考題精華，從核心觀念到必考題型，為您打造最全面的溫習計畫。</p>
        </section>

        <!-- Section 1: 名詞定義 -->
        <section id="definitions" class="mb-20">
            <h3 class="text-3xl font-bold mb-10 text-center fade-in">1. 核心名詞定義</h3>
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8" id="definitions-container">
                <!-- Definition Cards will be injected by JS -->
            </div>
        </section>

        <!-- Section 2: 計算公式 -->
        <section id="formulas" class="mb-20">
            <h3 class="text-3xl font-bold mb-10 text-center fade-in">2. 關鍵計算公式</h3>
            <div class="space-y-8" id="formulas-container">
                 <!-- Formula Cards will be injected by JS -->
            </div>
        </section>
        
        <!-- Section 3: 考試方向 -->
        <section id="direction" class="mb-20">
            <h3 class="text-3xl font-bold mb-10 text-center fade-in">3. 考試方向分析</h3>
            <div class="grid md:grid-cols-2 gap-8" id="direction-container">
                <!-- Direction Cards will be injected by JS -->
            </div>
        </section>

        <!-- Section 4: 常見主題 -->
        <section id="topics">
            <h3 class="text-3xl font-bold mb-10 text-center fade-in">4. 常見主題與題型</h3>
            <div class="space-y-4" id="topics-container">
                <!-- Accordion items will be injected by JS -->
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-white mt-24 border-t">
        <div class="container mx-auto px-6 py-8 text-center text-gray-500">
            <p>&copy; 2025 經濟學溫習輔助工具. All rights reserved.</p>
        </div>
    </footer>

<script>
document.addEventListener('DOMContentLoaded', function() {

    // --- DATA ---
    const definitions = [
        { term: '需求彈性', description: '衡量商品需求量對其價格變動的敏感程度。分為有彈性(>1)、無彈性(<1)、單一彈性(=1)。', icon: `<path stroke-linecap="round" stroke-linejoin="round" d="M3 6.021a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 6.021v1.503a2.25 2.25 0 01-.588 1.514l-4.814 4.814a1.5 1.5 0 00-.438 1.06V18a2.25 2.25 0 01-2.25 2.25H8.25A2.25 2.25 0 016 18v-2.888a1.5 1.5 0 00-.438-1.06L.588 9.038A2.25 2.25 0 010 7.524V6.021z" />` },
        { term: '交叉彈性', description: '衡量商品 X 需求對商品 Y 價格變動的反應。正值為替代品，負值為互補品。', icon: `<path stroke-linecap="round" stroke-linejoin="round" d="M13.5 16.875h3.375m0 0h3.375m-3.375 0V13.5m0 3.375v3.375M6 10.5h2.25a2.25 2.25 0 002.25-2.25V6a2.25 2.25 0 00-2.25-2.25H6A2.25 2.25 0 003.75 6v2.25A2.25 2.25 0 006 10.5zm0 9.75h2.25a2.25 2.25 0 002.25-2.25v-1.5a2.25 2.25 0 00-2.25-2.25H6a2.25 2.25 0 00-2.25 2.25v1.5A2.25 2.25 0 006 20.25z" />` },
        { term: '所得/替代效果', description: '<b>所得效果</b>: 價格變動影響實質購買力。<br><b>替代效果</b>: 相對價格改變影響消費選擇。', icon: `<path stroke-linecap="round" stroke-linejoin="round" d="M2.25 18.75a60.07 60.07 0 0115.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 013 6h-.75m0 0v-.75A.75.75 0 013 4.5h.75m12 12v.75a.75.75 0 01-.75.75h-.75m0 0v-.75a.75.75 0 01.75-.75h.75M3 12h18M3 12v.75a.75.75 0 01-.75.75h-.75m0 0v-.75a.75.75 0 01.75-.75h.75m12 0h.75a.75.75 0 01.75.75v.75m0 0h-.75a.75.75 0 01-.75-.75v-.75M3 6h18m-18 6h18" />` },
        { term: '正常財 vs 劣等財', description: '<b>正常財</b>: 所得增加，需求增加。<br><b>劣等財</b>: 所得增加，需求減少。', icon: `<path stroke-linecap="round" stroke-linejoin="round" d="M12 6v12m-3-2.818l.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />` },
        { term: '生產可能曲線', description: '在既有資源與技術下，能生產兩種商品的最大數量組合軌跡。', icon: `<path stroke-linecap="round" stroke-linejoin="round" d="M3.75 15.75c0-1.33.42-2.551 1.148-3.551.728-1 1.684-1.748 2.73-2.31.52-.286 1.074-.532 1.648-.748C10.024 8.99 10.994 8.75 12 8.75c.883 0 1.737.19 2.525.538.574.216 1.128.462 1.648.748 1.046.562 2.002 1.31 2.73 2.31.728 1 1.148 2.22 1.148 3.551_M4.5 18.75a15.75 15.75 0 0115 0" />` },
        { term: '比較/絕對利益', description: '<b>比較利益</b>: 生產機會成本較低。<br><b>絕對利益</b>: 生產使用要素較少。', icon: `<path stroke-linecap="round" stroke-linejoin="round" d="M6.75 7.5l3 2.25-3 2.25m4.5 0h3m-9 8.25h13.5A2.25 2.25 0 0021 18V6a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 6v12a2.25 2.25 0 002.25 2.25z" />` },
        { term: '機會成本', description: '為了得到某物，所必須放棄最有價值的替代方案。', icon: `<path stroke-linecap="round" stroke-linejoin="round" d="M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3" />` },
        { term: '價格上/下限', description: '政府設定的法定價格。<b>上限 (Ceiling)</b> 可能導致短缺，<b>下限 (Floor)</b> 可能導致剩餘。', icon: `<path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M3 13.5h18M3 13.5v2.25A2.25 2.25 0 005.25 18h13.5A2.25 2.25 0 0021 15.75V13.5M6 18v-2.25m12 2.25v-2.25" />` }
    ];

    const formulas = [
        { 
            title: '需求/供給價格彈性（中點法）', 
            formula: String.raw`\text{彈性} = \frac{(Q_2 - Q_1) / [(Q_2 + Q_1) / 2]}{(P_2 - P_1) / [(P_2 + P_1) / 2]}`,
            example: `<b>試算題：</b>某商品價格從 $5 上漲到 $15，需求量從 20 單位下降到 10 單位，求其需求價格彈性？`,
            solution: `<b>如何解答：</b><br>將數值代入中點法公式：<div class="text-center text-base bg-gray-50 p-3 my-2 rounded-lg">` + '`' + String.raw`\text{彈性} = \left| \frac{ \frac{10-20}{(10+20)/2} }{ \frac{15-5}{(15+5)/2} } \right| = \left| \frac{ \frac{-10}{15} }{ \frac{10}{10} } \right| = \left| \frac{-0.667}{1} \right| \approx 0.67` + '`' + `</div>因為 0.67 < 1，所以需求為<b>無彈性</b>。`
        },
        { 
            title: '市場均衡 (Market Equilibrium)', 
            formula: String.raw`\text{需求量 } (Q_d) = \text{供給量 } (Q_s)`,
            example: `<b>試算題：</b>市場需求為 `+'`'+`Q_d = 14 - 3P`+'`'+`，供給為 `+'`'+`Q_s = 2 + P`+'`'+`，求解均衡價量？`,
            solution: `<b>如何解答：</b><br>1. <b>令需求等於供給:</b> `+'`'+`14 - 3P = 2 + P`+'`'+`<br>2. <b>解出價格 P:</b> 移項得 `+'`'+`12 = 4P`+'`'+`，所以均衡價格 `+'`'+`P^* = 3`+'`'+`。 <br>3. <b>代回 P 解出數量 Q:</b> `+'`'+`Q^* = 2 + 3 = 5`+'`'+`。均衡點為 (P=3, Q=5)。`
        },
        { 
            title: '總收益 (Total Revenue, TR)', 
            formula: String.raw`TR = \text{價格 } (P) \times \text{數量 } (Q)`,
            example: `<b>試算題：</b>電影票一張 $10 時，售出 500 張。降價為 $8 後，售出 700 張。總收益如何變化？`,
            solution: `<b>如何解答：</b><br>1. <b>原總收益:</b> `+'`'+`TR_1 = 10 \\times 500 = 5000`+'`'+`。<br>2. <b>新總收益:</b> `+'`'+`TR_2 = 8 \\times 700 = 5600`+'`'+`。<br>3. <b>比較結果:</b> 總收益增加了 $600。這表示在此價格區間，電影票的需求是<b>有彈性</b>的。`
        },
        { 
            title: '機會成本 (Opportunity Cost)', 
            formula: String.raw`\text{X 的機會成本} = \frac{\text{所放棄的 Y 數量}}{\text{所增加的 X 數量}}`,
            example: `<b>試算題：</b>某國原先生產 200 單位汽車和 350 單位電腦。為增產至 300 單位汽車，必須減產至 200 單位電腦。增產 100 輛汽車的機會成本是多少？`,
            solution: `<b>如何解答：</b><br>1. <b>找出 X 的變化量:</b> `+'`'+`\\Delta X = 300 - 200 = 100`+'`'+` 輛汽車。<br>2. <b>找出 Y 的放棄量:</b> `+'`'+`\\Delta Y = 350 - 200 = 150`+'`'+` 台電腦。<br>3. <b>計算結果:</b> 增產 100 輛汽車的機會成本是放棄 150 台電腦。`
        }
    ];
    
    const directions = [
        { title: '觀念與應用並重', description: '不只考名詞，更強調將觀念應用於實際情境，例如：分析咖啡豆豐收對「茶」市場的影響。', icon: `<path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 001.5-.189m-1.5.189a6.01 6.01 0 01-1.5-.189m3.75 7.478a12.06 12.06 0 01-4.5 0m3.75 2.311a15.045 15.045 0 01-7.5 0C4.508 19.662 2.25 17.418 2.25 14.75c0-1.393.59-2.663 1.5-3.562m16.5 6.124c.91-1.006 1.5-2.274 1.5-3.662 0-2.668-2.258-4.912-5.25-4.912h-.003M7.5 11.25c0-2.668 2.258-4.912 5.25-4.912h.003" />` },
        { title: '彈性是絕對核心', description: '務必熟練彈性計算、其與總收益的關係，並能判斷「薄利多銷」等商業策略的成敗條件。', icon: `<path stroke-linecap="round" stroke-linejoin="round" d="M9.75 3.104v5.714a2.25 2.25 0 01-.529 1.458l-4.5 4.5a2.25 2.25 0 01-3.182 0l-1.99-1.99a2.25 2.25 0 010-3.182l4.5-4.5A2.25 2.25 0 019.75 3.104zm9.375 0v5.714a2.25 2.25 0 00.529 1.458l4.5 4.5a2.25 2.25 0 003.182 0l1.99-1.99a2.25 2.25 0 000-3.182l-4.5-4.5A2.25 2.25 0 0019.125 3.104z" />` },
        { title: '比較利益與貿易', description: '重點在於機會成本計算、判斷比較/絕對利益，並能完整分析貿易後的生產、消費與進出口量。申論題常客！', icon: `<path stroke-linecap="round" stroke-linejoin="round" d="M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.658-.463 1.248-1.126 1.248H6.016c-.663 0-1.196-.59-1.126-1.248l1.263-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.126 1.007zM8.25 10.5a.75.75 0 01.75-.75h6a.75.75 0 010 1.5h-6a.75.75 0 01-.75-.75z" />` },
        { title: '供需變動分析', description: '能精準判斷單一或多重因素（如所得增加＋技術進步）變動後，對均衡價量的最終影響。', icon: `<path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3v11.25A2.25 2.25 0 006 16.5h2.25M3.75 3h-1.5m1.5 0h16.5m0 0h1.5m-1.5 0v11.25A2.25 2.25 0 0118 16.5h-2.25m-7.5 0h7.5m-7.5 0l-1 1.087m1-1.087l1 1.087m0 0V21m0-4.5H9.75m5.25 0h.008v.008h-.008v-.008zm-.008 0H12m0 0h2.25" />` }
    ];

    const topics = [
        {
            name: '供給與需求分析',
            content: `
                <div class="grid md:grid-cols-2 gap-8 items-center">
                    <div>
                        <ul class="list-disc list-inside space-y-3 text-gray-700">
                            <li><b>影響需求曲線移動</b>：所得（正常/劣等財）、偏好、相關品價格（替代/互補品）。</li>
                            <li><b>影響供給曲線移動</b>：生產要素價格、技術進步、預期。</li>
                            <li><b>曲線移動方向</b>：需求/供給「增加」使曲線向<b>右</b>移；「減少」則向<b>左</b>移。</li>
                            <li><b>市場均衡計算</b>：透過解聯立方程式找出均衡價格與數量。</li>
                            <li><b>同時變動分析</b>：當供需曲線同時移動，均衡價格或數量其中之一的變動方向可能不確定，需視移動幅度而定。</li>
                        </ul>
                        <div class="mt-6 p-4 rounded-lg pro-tip">
                            <div class="flex items-center">
                                <svg class="h-6 w-6 text-yellow-500 mr-3 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 001.5-.189m-1.5.189a6.01 6.01 0 01-1.5-.189m3.75 7.478a12.06 12.06 0 01-4.5 0m3.75 2.311a15.045 15.045 0 01-7.5 0C4.508 19.662 2.25 17.418 2.25 14.75c0-1.393.59-2.663 1.5-3.562m16.5 6.124c.91-1.006 1.5-2.274 1.5-3.662 0-2.668-2.258-4.912-5.25-4.912h-.003M7.5 11.25c0-2.668 2.258-4.912 5.25-4.912h.003" /></svg>
                                <div>
                                    <h4 class="font-semibold">Pro-Tip</h4>
                                    <p class="text-sm">價格變動只會造成點沿著線「移動」，其他因素才會讓整條線「移動」！</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="h-80 md:h-96"><canvas id="supplyDemandChart"></canvas></div>
                </div>
            `,
            chartId: null
        },
        {
            name: '彈性及其應用',
            content: `
                <div class="space-y-8 text-gray-700">
                    <div class="grid md:grid-cols-2 gap-8 items-center">
                        <div>
                            <h5 class="font-semibold text-gray-800 mb-2">所得彈性 (Income Elasticity)</h5>
                            <p class="text-sm mb-2">衡量所得變動對需求量的影響。當所得增加時：</p>
                            <ul class="list-disc list-inside space-y-2 text-sm">
                                <li><b>所得彈性 > 0 (正值)</b>：此為<b>正常財</b>，需求增加，需求曲線向<b>右</b>移。</li>
                                <li><b>所得彈性 < 0 (負值)</b>：此為<b>劣等財</b>，需求減少，需求曲線向<b>左</b>移。</li>
                            </ul>
                        </div>
                        <div class="h-64 md:h-72"><canvas id="incomeElasticityChart"></canvas></div>
                    </div>
                    <div class="grid md:grid-cols-2 gap-8 items-center">
                        <div>
                             <h5 class="font-semibold text-gray-800 mb-2">交叉價格彈性 (Cross-Price Elasticity)</h5>
                             <p class="text-sm mb-2">衡量 B 商品價格變動對 A 商品需求的影響。當 B 價格上漲時：</p>
                            <ul class="list-disc list-inside space-y-2 text-sm">
                                <li><b>交叉彈性 > 0 (正值)</b>：A、B 為<b>替代品</b>。A 的需求增加，需求曲線向<b>右</b>移。</li>
                                <li><b>交叉彈性 < 0 (負值)</b>：A、B 為<b>互補品</b>。A 的需求減少，需求曲線向<b>左</b>移。</li>
                            </ul>
                        </div>
                        <div class="h-64 md:h-72"><canvas id="crossPriceElasticityChart"></canvas></div>
                    </div>
                    <div class="grid md:grid-cols-2 gap-8 items-center">
                         <div>
                            <div class="p-4 bg-blue-50 rounded-lg text-blue-800 border-l-4 border-blue-400">
                                <strong>關鍵應用：價格彈性與總收益</strong><br>
                                <p class="text-sm mt-1">廠商應根據其產品的需求彈性來制定價格策略：<br>
                                - <b>需求有彈性 (&gt; 1)</b>: 應「降價」以增加總收益（薄利多銷）。<br>
                                - <b>需求無彈性 (&lt; 1)</b>: 應「漲價」以增加總收益（如：地鐵票價）。</p>
                            </div>
                        </div>
                        <div class="h-64 md:h-72"><canvas id="totalRevenueChart"></canvas></div>
                    </div>
                </div>
            `,
            chartId: null 
        },
        {
            name: '生產與國際貿易',
            content: `
                 <div class="grid md:grid-cols-2 gap-8 items-center">
                    <div>
                        <ul class="list-disc list-inside space-y-3 text-gray-700">
                            <li><b>PPF 的移動（經濟成長）</b>：技術進步、資源增加，會使整條 PPF 向外擴張。</li>
                            <li><b>PPF 的形狀</b>：通常為凹向原點，代表機會成本遞增。</li>
                            <li>計算機會成本，判斷兩國的「比較利益」。</li>
                            <li><b>交易條件</b>：貿易價格必須介於兩國的機會成本之間。</li>
                            <li><b>貿易利得</b>：貿易使兩國的「消費可能曲線」擴張至原 PPF 之外。</li>
                        </ul>
                         <div class="mt-6 p-4 rounded-lg pro-tip">
                            <div class="flex items-center">
                                <svg class="h-6 w-6 text-yellow-500 mr-3 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 001.5-.189m-1.5.189a6.01 6.01 0 01-1.5-.189m3.75 7.478a12.06 12.06 0 01-4.5 0m3.75 2.311a15.045 15.045 0 01-7.5 0C4.508 19.662 2.25 17.418 2.25 14.75c0-1.393.59-2.663 1.5-3.562m16.5 6.124c.91-1.006 1.5-2.274 1.5-3.662 0-2.668-2.258-4.912-5.25-4.912h-.003M7.5 11.25c0-2.668 2.258-4.912 5.25-4.912h.003" /></svg>
                                <div>
                                    <h4 class="font-semibold">Pro-Tip</h4>
                                    <p class="text-sm">貿易讓國家能「消費」在 PPF 之外，但「生產」點仍在 PPF 上。</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="h-80 md:h-96"><canvas id="ppfChart"></canvas></div>
                </div>
            `,
            chartId: null
        },
        {
            name: '市場應用與政府政策',
            content: `
                 <div class="grid md:grid-cols-2 gap-8 items-center">
                     <div>
                        <h5 class="font-semibold text-gray-800 mb-2">價格下限 (Price Floor)</h5>
                        <ul class="list-disc list-inside space-y-2 text-sm">
                            <li><b>定義</b>：法定最低價格。</li>
                            <li><b>條件</b>：必須設定在均衡價格<b>之上</b>才有效力。</li>
                            <li><b>效果</b>：造成<b>剩餘 (Surplus)</b>。</li>
                            <li><b>案例</b>：<b>最低工資法</b>，會導致失業。</li>
                        </ul>
                        <h5 class="font-semibold text-gray-800 mt-6 mb-2">價格上限 (Price Ceiling)</h5>
                        <ul class="list-disc list-inside space-y-2 text-sm">
                           <li><b>定義</b>：法定最高價格。</li>
                            <li><b>條件</b>：必須設定在均衡價格<b>之下</b>才有效力。</li>
                            <li><b>效果</b>：造成<b>短缺 (Shortage)</b>。</li>
                            <li><b>案例</b>：<b>租金管制</b>。</li>
                        </ul>
                    </div>
                    <div class="h-80 md:h-96"><canvas id="governmentPolicyChart"></canvas></div>
                </div>
            `,
            chartId: null
        },
        {
            name: '必考經典題型',
            content: `
                <div class="space-y-8 text-gray-700">
                    <div>
                        <h5 class="font-semibold text-gray-800 mb-2 border-b pb-2">題型一：市場均衡計算</h5>
                        <p class="mb-2"><b>情境：</b>假設市場需求為 ` + '`' + `Q_d = 14 - 3P` + '`' + `，供給為 ` + '`' + `Q_s = 2 + P` + '`' + `，求解均衡價量？</p>
                        <p><b>解法：</b>令 ` + '`' + `Q_d = Q_s` + '`' + `，得到 ` + '`' + `14 - 3P = 2 + P` + '`' + `。移項後 ` + '`' + `12 = 4P` + '`' + `，解得均衡價格 ` + '`' + `P^* = 3` + '`' + `。將 ` + '`' + `P=3` + '`' + ` 代回任一式，可得均衡數量 ` + '`' + `Q^* = 5` + '`' + `。</p>
                    </div>
                     <div>
                        <h5 class="font-semibold text-gray-800 mb-2 border-b pb-2">題型二：彈性與總收益決策</h5>
                        <p class="mb-2"><b>情境：</b>地鐵票價從 $1.25 調漲至 $1.50，搭乘人次從每日 100 萬降至 95 萬。請問地鐵公司的總收益是增加還減少？</p>
                        <p><b>解法：</b>利用中點法計算需求彈性。價格變動百分比約 22%，數量變動百分比約 5%。彈性值約為 0.23，遠小於 1，屬於<b>無彈性</b>。對於無彈性商品，漲價會使總收益增加。 (原收益: $1.25M, 新收益: $1.425M)</p>
                    </div>
                    <div>
                        <h5 class="font-semibold text-gray-800 mb-2 border-b pb-2">題型三：供需曲線同時移動</h5>
                        <p class="mb-2"><b>情境：</b>假設人們變得更喜歡喝咖啡（需求增加），同時咖啡豆因豐收而價格下跌（供給增加），請問咖啡市場的均衡價量如何變動？</p>
                        <p><b>解法：</b>1. 需求增加 (D 右移)，使 P、Q 皆上升。<br>2. 供給增加 (S 右移)，使 P 下降、Q 上升。<br><b>結論：</b>兩股力量都使 Q 明顯<b>增加</b>。但 P 的變動方向則不確定，需視 D 和 S 移動的相對幅度而定。</p>
                    </div>
                     <div>
                        <h5 class="font-semibold text-gray-800 mb-2 border-b pb-2">題型四：價格管制效果分析</h5>
                        <p class="mb-2"><b>情境：</b>某勞動市場的需求為 `+'`'+`L_d = 100 - 2W`+'`'+`，供給為 `+'`'+`L_s = 20 + 2W`+'`'+`。若政府設定最低工資為 $25，會造成多少人失業？</p>
                        <p><b>解法：</b>1. <b>找出原均衡點：</b>`+'`'+`100 - 2W = 20 + 2W \\Rightarrow 80 = 4W \\Rightarrow W^* = 20`+'`'+`。均衡就業量 `+'`'+`L^* = 60`+'`'+`。<br>2. <b>計算最低工資下的供需量：</b>在 `+'`'+`W=25`+'`'+` 時，勞動需求量 `+'`'+`L_d = 100 - 50 = 50`+'`'+` (願意僱用的人數)，勞動供給量 `+'`'+`L_s = 20 + 50 = 70`+'`'+` (願意工作的人數)。<br><b>結論：</b>失業人數 = 供給量 - 需求量 = `+'`'+`70 - 50 = 20`+'`'+` 人。</p>
                    </div>
                    <div>
                        <h5 class="font-semibold text-gray-800 mb-2 border-b pb-2">題型五：國際貿易分析大題</h5>
                        <p class="mb-2"><b>情境：</b>(參考考卷申論題) 給定兩國(本國/外國)生產兩商品(X/Y)的勞動投入量與勞動總人口。</p>
                        <div class="mt-4 p-4 bg-green-50 rounded-lg text-green-800 border-l-4 border-green-400 text-sm">
                            <strong>標準解題五步驟</strong><br>
                            1. <b>計算機會成本</b>：計算兩國生產 X 和 Y 的機會成本。例如，本國生產 1 單位 X 需 6 勞工，Y 需 12 勞工，則 1X 的機會成本是 0.5Y。<br>
                            2. <b>判斷比較利益</b>：機會成本較低者，具備該商品的比較利益。找出兩國分別適合生產什麼。<br>
                            3. <b>決定專業化生產</b>：貿易後，各國完全專業化生產其具比較利益的商品。算出此時兩國的 X, Y 產量。<br>
                            4. <b>計算貿易後消費</b>：給定貿易價格 (如 Px=1, Py=1)，先算出各國的 GDP (總收入)。再依據消費偏好 (如 2X=Y) 解聯立方程式，得出最終消費量。<br>
                            5. <b>計算進出口量</b>：比較消費量與生產量。消費 > 生產，則為淨進口；生產 > 消費，則為淨出口。
                        </div>
                    </div>
                </div>
            `,
            chartId: null
        }
    ];

    // --- DYNAMIC CONTENT INJECTION ---
    const definitionsContainer = document.getElementById('definitions-container');
    definitions.forEach((def, index) => {
        const card = document.createElement('div');
        card.className = 'figma-card p-6 fade-in';
        card.style.animationDelay = `${index * 50}ms`;
        card.innerHTML = `
            <div class="flex items-center mb-3">
                <div class="bg-blue-100 text-blue-600 rounded-lg p-2 mr-4">
                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">${def.icon}</svg>
                </div>
                <h4 class="font-bold text-lg text-gray-900">${def.term}</h4>
            </div>
            <p class="text-gray-600 leading-relaxed text-sm">${def.description}</p>
        `;
        definitionsContainer.appendChild(card);
    });

    const formulasContainer = document.getElementById('formulas-container');
    formulas.forEach((form, index) => {
        const card = document.createElement('div');
        card.className = 'figma-card p-6 fade-in';
        card.style.animationDelay = `${index * 50}ms`;
        card.innerHTML = `
            <h4 class="font-semibold text-lg text-gray-800 mb-3">${form.title}</h4>
            <div class="text-gray-700 text-center text-lg bg-gray-50 p-4 rounded-md">${'`'}${form.formula}${'`'}</div>
            <div class="mt-4 pt-4 border-t border-gray-100 text-sm space-y-2">
                <p class="text-gray-800 font-semibold">${form.example}</p>
                <p class="text-gray-600 leading-relaxed">${form.solution}</p>
            </div>
        `;
        formulasContainer.appendChild(card);
    });
    
    const directionContainer = document.getElementById('direction-container');
    directions.forEach((dir, index) => {
        const card = document.createElement('div');
        card.className = 'figma-card p-6 flex items-start fade-in';
        card.style.animationDelay = `${index * 50}ms`;
        card.innerHTML = `
            <div class="flex-shrink-0 bg-green-100 text-green-600 rounded-lg p-3 mr-5">
                <svg class="h-7 w-7" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">${dir.icon}</svg>
            </div>
            <div>
                <h4 class="font-bold text-lg text-gray-800 mb-1">${dir.title}</h4>
                <p class="text-gray-600 leading-relaxed">${dir.description}</p>
            </div>
        `;
        directionContainer.appendChild(card);
    });
    
    const topicsContainer = document.getElementById('topics-container');
    topics.forEach((topic, index) => {
        const item = document.createElement('div');
        item.className = 'accordion-item figma-card overflow-hidden fade-in';
        item.style.animationDelay = `${index * 50}ms`;
        item.innerHTML = `
            <button class="accordion-header w-full text-left p-6 flex justify-between items-center hover:bg-gray-50/70 transition">
                <h4 class="text-lg font-bold text-gray-800">${topic.name}</h4>
                <svg class="accordion-arrow h-6 w-6 text-gray-400 transition-transform" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>
            </button>
            <div class="accordion-content">
                <div class="p-6 border-t border-gray-200">
                   ${topic.content}
                </div>
            </div>
        `;
        topicsContainer.appendChild(item);
    });

    // --- FUNCTIONALITY ---
    try {
        if (window.renderMathInElement) {
            renderMathInElement(document.body, { delimiters: [{left: '`', right: '`', display: false}] });
        }
    } catch (e) { console.error("KaTeX rendering failed:", e); }

    const accordionItems = document.querySelectorAll('.accordion-item');
    accordionItems.forEach(item => {
        const header = item.querySelector('.accordion-header');
        const content = item.querySelector('.accordion-content');
        
        header.addEventListener('click', () => {
            const isActive = item.classList.contains('active');
            
            accordionItems.forEach(i => {
                i.classList.remove('active');
                i.querySelector('.accordion-content').style.maxHeight = '0px';
            });

            if (!isActive) {
                item.classList.add('active');
                content.style.maxHeight = content.scrollHeight + 'px';
                
                const canvases = content.querySelectorAll('canvas');
                canvases.forEach(canvas => {
                    if (canvas && !canvas.chart) {
                        canvas.chart = createChart(canvas.id);
                    }
                });
            }
        });
    });

    // --- CHART CREATION LOGIC ---
    function createChart(chartId) {
        const ctx = document.getElementById(chartId)?.getContext('2d');
        if (!ctx) return null;

        const chartOptions = { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom' } }, interaction: { intersect: false, mode: 'index' }, scales: { x: { grid: { display: false }, title: {display: true, text: '數量'} }, y: { grid: { color: '#E9ECEF' }, title: {display: true, text: '價格/工資'} } } };
        const demandData = [50, 40, 30, 20, 10, 0];

        switch (chartId) {
            case 'supplyDemandChart':
                return new Chart(ctx, { type: 'line', data: { labels: ['0', '10', '20', '30', '40', '50'], datasets: [ { label: '需求 (Demand)', data: [50, 40, 30, 20, 10, 0], borderColor: '#EF4444', backgroundColor: '#FEE2E2', tension: 0.1 }, { label: '供給 (Supply)', data: [0, 10, 20, 30, 40, 50], borderColor: '#3B82F6', backgroundColor: '#DBEAFE', tension: 0.1 } ]}, options: { ...chartOptions, plugins: { ...chartOptions.plugins, title: { display: true, text: '市場均衡' }}} });
            case 'totalRevenueChart':
                const labels = Array.from({ length: 11 }, (_, i) => i);
                const priceData = labels.map(q => 10 - q);
                const revenueData = labels.map(q => (10 - q) * q);
                return new Chart(ctx, {
                    type: 'line',
                    data: { labels: labels, datasets: [{ label: '總收益 (Total Revenue)', data: revenueData, borderColor: '#F472B6', backgroundColor: 'rgba(244, 114, 182, 0.1)', yAxisID: 'y-revenue', tension: 0.4, fill: true }, { label: '需求曲線 (Price)', data: priceData, borderColor: '#60A5FA', yAxisID: 'y-price', tension: 0.1 }] },
                    options: { ...chartOptions, plugins: { ...chartOptions.plugins, title: { display: true, text: '總收益曲線' } }, scales: { x: { ...chartOptions.scales.x }, 'y-revenue': { type: 'linear', position: 'left', title: { display: true, text: '總收益' } }, 'y-price': { type: 'linear', position: 'right', grid: { drawOnChartArea: false }, title: { display: true, text: '價格' } } } }
                });
            case 'incomeElasticityChart':
                 return new Chart(ctx, {
                    type: 'line',
                    data: { labels: ['0', '10', '20', '30', '40', '50'], datasets: [ 
                        { label: '原需求 (D0)', data: demandData, borderColor: '#A1A1AA', borderDash: [5, 5], fill: false, tension: 0.1 }, 
                        { label: '正常財 (D1, 所得增加)', data: demandData.map(d => d + 10), borderColor: '#22C55E', fill: false, tension: 0.1 },
                        { label: '劣等財 (D2, 所得增加)', data: demandData.map(d => d - 10 > 0 ? d-10 : 0), borderColor: '#F97316', fill: false, tension: 0.1 } 
                    ]},
                    options: { ...chartOptions, plugins: { ...chartOptions.plugins, title: { display: true, text: '所得彈性下的需求曲線移動' } } }
                });
            case 'crossPriceElasticityChart':
                 return new Chart(ctx, {
                    type: 'line',
                    data: { labels: ['0', '10', '20', '30', '40', '50'], datasets: [ 
                        { label: '原需求 (D0)', data: demandData, borderColor: '#A1A1AA', borderDash: [5, 5], fill: false, tension: 0.1 }, 
                        { label: '替代品 (D1, B價漲)', data: demandData.map(d => d + 10), borderColor: '#3B82F6', fill: false, tension: 0.1 },
                        { label: '互補品 (D2, B價漲)', data: demandData.map(d => d - 10 > 0 ? d-10 : 0), borderColor: '#EF4444', fill: false, tension: 0.1 }
                     ]},
                    options: { ...chartOptions, plugins: { ...chartOptions.plugins, title: { display: true, text: '交叉彈性下的需求曲線移動' } } }
                });
            case 'ppfChart':
                return new Chart(ctx, { type: 'scatter', data: { datasets: [ { label: 'PPF', showLine: true, tension: 0.4, data: [{x: 0, y: 100}, {x: 20, y: 95}, {x: 40, y: 85}, {x: 60, y: 70}, {x: 80, y: 50}, {x: 100, y: 0}], borderColor: '#10B981', backgroundColor: '#A7F3D0' }, { label: '無效率點', data: [{x: 40, y: 50}], backgroundColor: '#F97316', pointRadius: 6 }, { label: '無法達成點', data: [{x: 80, y: 80}], backgroundColor: '#8B5CF6', pointRadius: 6 } ]}, options: { ...chartOptions, scales: { x: {title: {display: true, text: '商品 X'}}, y: {title: {display: true, text: '商品 Y'}} }, plugins: { ...chartOptions.plugins, title: { display: true, text: '生產可能曲線' }}} });
            case 'governmentPolicyChart':
                 return new Chart(ctx, {
                    type: 'line',
                    data: { labels: [0, 10, 20, 30, 40, 50], datasets: [ { label: '勞動需求', data: [50, 40, 30, 20, 10, 0], borderColor: '#EF4444', tension: 0.1, fill: false }, { label: '勞動供給', data: [0, 10, 20, 30, 40, 50], borderColor: '#3B82F6', tension: 0.1, fill: false }, { label: '最低工資 (價格下限)', data: [{x:0, y:40}, {x:50, y:40}], borderColor: '#10B981', borderDash: [5, 5], fill: false, pointRadius: 0 } ] },
                    options: { ...chartOptions, plugins: { ...chartOptions.plugins, title: { display: true, text: '最低工資對勞動市場的影響' }, annotation: { annotations: { line1: { type: 'line', yMin: 40, yMax: 40, borderColor: '#10B981', borderWidth: 2, borderDash: [6, 6], label: { content: '最低工資', enabled: true, position: 'end'} }, box1: { type: 'box', xMin: 20, xMax: 40, yMin: 40, yMax: 40, backgroundColor: 'rgba(249, 115, 22, 0.2)', label: { content: '剩餘(失業)', enabled: true } } } } } }
                });
        }
        return null;
    }
});
</script>

</body>
</html>

